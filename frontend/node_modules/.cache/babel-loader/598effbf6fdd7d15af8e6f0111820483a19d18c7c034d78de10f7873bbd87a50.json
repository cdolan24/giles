{"ast":null,"code":"import _objectSpread from\"C:/Users/doodl/Documents/GitHub/giles/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{searchPapers}from'./api';import CitationDisplay from'./CitationDisplay';import SearchFilters from'./SearchFilters';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWidget(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const[citations,setCitations]=useState([]);const[filters,setFilters]=useState({});const handleSend=async()=>{if(!input.trim())return;setMessages([...messages,{text:input,user:true}]);setLoading(true);try{// Pass filters to backend\nconst queryParams=_objectSpread({},filters);const results=await searchPapers(input,queryParams);setMessages(msgs=>[...msgs,{text:\"Recommended papers: \".concat(results.map(r=>r.title).join(', ')),user:false}]);setCitations(results.map(r=>({author:r.author||'Unknown',year:r.year||'N/A',title:r.title,journal:r.journal||'N/A'})));}catch(e){setMessages(msgs=>[...msgs,{text:'Error fetching recommendations.',user:false}]);setCitations([]);}setLoading(false);setInput('');};return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:16,borderRadius:8,maxWidth:400},children:[/*#__PURE__*/_jsx(SearchFilters,{onChange:setFilters}),/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:100,marginBottom:8},children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:msg.user?'right':'left'},children:msg.text},idx)),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),style:{width:'80%'},placeholder:\"Ask about a field of study...\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,style:{width:'18%',marginLeft:'2%'},disabled:loading,children:\"Send\"}),/*#__PURE__*/_jsx(CitationDisplay,{citations:citations})]});}export default ChatWidget;","map":{"version":3,"names":["React","useState","searchPapers","CitationDisplay","SearchFilters","jsx","_jsx","jsxs","_jsxs","ChatWidget","messages","setMessages","input","setInput","loading","setLoading","citations","setCitations","filters","setFilters","handleSend","trim","text","user","queryParams","_objectSpread","results","msgs","concat","map","r","title","join","author","year","journal","e","style","border","padding","borderRadius","maxWidth","children","onChange","minHeight","marginBottom","msg","idx","textAlign","type","value","target","width","placeholder","disabled","onClick","marginLeft"],"sources":["C:/Users/doodl/Documents/GitHub/giles/frontend/src/ChatWidget.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\n\r\nimport { searchPapers } from './api';\r\nimport CitationDisplay from './CitationDisplay';\r\nimport SearchFilters from './SearchFilters';\r\n\r\n\r\nfunction ChatWidget() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [citations, setCitations] = useState([]);\r\n  const [filters, setFilters] = useState({});\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim()) return;\r\n    setMessages([...messages, { text: input, user: true }]);\r\n    setLoading(true);\r\n    try {\r\n      // Pass filters to backend\r\n      const queryParams = { ...filters };\r\n      const results = await searchPapers(input, queryParams);\r\n      setMessages(msgs => [\r\n        ...msgs,\r\n        { text: `Recommended papers: ${results.map(r => r.title).join(', ')}`, user: false }\r\n      ]);\r\n      setCitations(results.map(r => ({\r\n        author: r.author || 'Unknown',\r\n        year: r.year || 'N/A',\r\n        title: r.title,\r\n        journal: r.journal || 'N/A'\r\n      })));\r\n    } catch (e) {\r\n      setMessages(msgs => [\r\n        ...msgs,\r\n        { text: 'Error fetching recommendations.', user: false }\r\n      ]);\r\n      setCitations([]);\r\n    }\r\n    setLoading(false);\r\n    setInput('');\r\n  };\r\n\r\n  return (\r\n    <div style={{ border: '1px solid #ccc', padding: 16, borderRadius: 8, maxWidth: 400 }}>\r\n      <SearchFilters onChange={setFilters} />\r\n      <div style={{ minHeight: 100, marginBottom: 8 }}>\r\n        {messages.map((msg, idx) => (\r\n          <div key={idx} style={{ textAlign: msg.user ? 'right' : 'left' }}>\r\n            {msg.text}\r\n          </div>\r\n        ))}\r\n        {loading && <div>Loading...</div>}\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        value={input}\r\n        onChange={e => setInput(e.target.value)}\r\n        style={{ width: '80%' }}\r\n        placeholder=\"Ask about a field of study...\"\r\n        disabled={loading}\r\n      />\r\n      <button onClick={handleSend} style={{ width: '18%', marginLeft: '2%' }} disabled={loading}>\r\n        Send\r\n      </button>\r\n      <CitationDisplay citations={citations} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatWidget;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}